library(shiny)

Logged = FALSE
ID = NULL

shinyServer <- function(input, output, session) {
  
  source('./util.R', local = TRUE)
  source('./login.R',  local = TRUE)
  
  output$menu <- renderUI({
    if(input$user == "client"){
      material_side_nav_tabs(
        side_nav_tabs = c(
          "Current Claims" = "current",
          "Past Claims" = "history",
          "Q&A" = "qa"
        ),
        icons = c("monetization_on","insert_chart", "question_answer")
      )
    }
  })
  
  output$type <- renderUI({
    if(input$type== "auto"){
      material_checkbox(
        input_id = "garage",
        label = "Garage Involved",
        initial_value = FALSE,
        color = "green"
      )
    }else{
      material_checkbox(
        input_id = "garage",
        label = "Home Repair Involved",
        initial_value = FALSE,
        color = "green"
      )
    }
  })
  
  observe({
    if(input$date !=""){
      test = as.Date(input$date,format = '%d %B, %Y')
      print(test)
      print(class(test))
    }
      
  })
    
  observeEvent(input$submit, {
      
      if( input$date=="" | input$desc==""){
        output$submitStatus <- renderText({
          paste0("Please fill in all required information.")
        })
      }
      else{
        dateFormat = as.Date(input$date,format = '%d %B, %Y')
        output$submitStatus <- renderText({
          paste0("Submission Succeeded!")
        })
      }
  })
    
  
}